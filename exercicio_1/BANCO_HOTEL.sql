-- CRIAÇÃO DE TABELAS

CREATE TABLE CATEGORIA (
		COD_CAT INT NOT NULL,
		NOME VARCHAR(50) NOT NULL,
		VALOR_DIA FLOAT NOT NULL,
		CONSTRAINT PK_CAT PRIMARY KEY(COD_CAT)
	);

CREATE TABLE APARTAMENTO (
		NUM INT NOT NULL PRIMARY KEY,
		STATUS CHAR(1) NOT NULL,
		COD_CAT INT NOT NULL,
		CONSTRAINT FK_CAT FOREIGN KEY(COD_CAT) REFERENCES CATEGORIA(COD_CAT)
	);
	
CREATE TABLE HOSPEDE (
		COD_HOSP INT NOT NULL,
		NOME VARCHAR(30),
		DT_NASC DATE,
		CONSTRAINT PK_HOSP PRIMARY KEY(COD_HOSP)
	);
	
CREATE TABLE HOSPEDAGEM (
		COD_HOSPEDA INT NOT NULL,
		COD_HOSP INT NOT NULL,
		NUM INT NOT NULL,
		DT_ENT DATE NOT NULL,
		DT_SAI DATE,
		CONSTRAINT PK_HOSPEDA PRIMARY KEY(COD_HOSPEDA),
		CONSTRAINT FK_HOSP FOREIGN KEY(COD_HOSP) REFERENCES HOSPEDE(COD_HOSP),
		CONSTRAINT FK_AP FOREIGN KEY(NUM) REFERENCES APARTAMENTO(NUM)
	);	

CREATE TABLE RESERVA(
		COD_RES INT NOT NULL,
		COD_HOSP INT,
		NUM INT,
		DT_RES DATE,
		DT_PREV_ENT DATE,
		DT_PREV_SAI DATE,
		CONSTRAINT PK_RES PRIMARY KEY(COD_RES),
		CONSTRAINT FK_HOSP2 FOREIGN KEY(COD_HOSP) REFERENCES HOSPEDE(COD_HOSP),
		CONSTRAINT FK_AP2 FOREIGN KEY(NUM) REFERENCES APARTAMENTO(NUM)
	);

-- INSERÇÕES

INSERT INTO RESERVA VALUES(1, 1, 103, '2023-12-12', '2023-12-23', NULL);
INSERT INTO RESERVA VALUES(1, 3, 103, '2024-01-12', '2024-01-20', NULL);

INSERT INTO CATEGORIA VALUES
		(1, 'Econômica', 100.00), 
		(2, 'Luxo', 300.00), 
		(3, 'Premium', 500.00);

INSERT INTO CATEGORIA VALUES
		(4, 'Standard', 200.00);

INSERT INTO CATEGORIA VALUES
		(5, 'Delux', 700.00);
		
INSERT INTO APARTAMENTO (NUM, STATUS, COD_CAT) 
	VALUES 
		(101, 'L', 1), 
		(102, 'L', 1), 
		(103, 'O', 2);

INSERT INTO APARTAMENTO VALUES(104, 'L', 3);
INSERT INTO APARTAMENTO VALUES(105, 'L', 4);
		
INSERT INTO HOSPEDE (COD_HOSP, NOME, DT_NASC) 
	VALUES 
		(1, 'João Silva', '1985-05-01'), 
		(2, 'Maria Santos', '1990-09-15'), 
		(3, 'Pedro Souza', '1978-02-22');
		
INSERT INTO HOSPEDE VALUES(4, 'Jonas Miguel', '1990-09-15');
		
INSERT INTO HOSPEDAGEM (COD_HOSPEDA, COD_HOSP, NUM, DT_ENT, DT_SAI) 
	VALUES 
		(1, 1, 101, '2022-02-28', '2022-03-03'), 
		(2, 2, 103, '2023-03-10', NULL), 
		(3, 3, 102, '2018-03-15', '2018-03-20');

INSERT INTO HOSPEDAGEM VALUES(4, 3, 104, '2024-03-08', '2024-03-09');
INSERT INTO HOSPEDAGEM VALUES(5, 1, 104, '2024-03-02', '2024-03-06');
INSERT INTO HOSPEDAGEM VALUES(6, 3, 103, '2024-01-12', '2024-01-25');
INSERT INTO HOSPEDAGEM VALUES(7, 2, 105, '2017-05-12', '2017-05-15');
INSERT INTO HOSPEDAGEM VALUES(8, 1, 102, '2019-05-23', '2019-05-25', 1);
INSERT INTO HOSPEDAGEM VALUES(9, 3, 104, '2017-10-01', '2017-10-06', 1);

UPDATE HOSPEDE 
SET NACIONALIDADE = 'Brasileiro'
WHERE COD_HOSP IN (1, 2, 3);

INSERT INTO FUNCIONARIO VALUES(1, 'RODOLFO', '1999-09-04', 1400.00);